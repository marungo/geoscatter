<!DOCTYPE html>
<html>
  <head>
    <title>Styled Map Types</title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <style>
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
      #map {
        height: 100%;
      }
    </style>
  </head>
  <body>
    <div id="map"></div>
    <script>
      info_list = [[42.2973205, -71.0744951, 37, 'Dorchester Massachusetts'],
                   [42.0959276, -72.5828662, 16, 'South End Massachusetts'],
                   [42.058436, -70.1786374, 13, 'Provincetown Massachusetts'],
                   [42.3750997, -71.1056156, 11, 'Cambridge Massachusetts'],
                   [42.3098201, -71.1203298, 10, 'Jamaica Plain Massachusetts'],
                   [42.3334312, -71.0494948, 10, 'South Boston Massachusetts'],
                   [42.3875968, -71.0994967, 9, 'Somerville Massachusetts'],
                   [42.3547903, -71.1181804, 8, 'Allston/Brighton Massachusetts'],
                   [42.4084302, -71.0119947, 8, 'Revere Massachusetts'],
                   [42.3551473, -71.0599538, 6, 'Downtown Crossing Massachusetts'],
                   [42.3750973, -71.0392172, 5, 'East Boston Massachusetts'],
                   [42.3756401, -71.2358003, 5, 'Waltham Massachusetts'],
                   [42.3507067, -71.0797296, 5, 'Back Bay Massachusetts'],
                   [42.34406895, -71.0945223672873, 5, 'Fenway/Kenmore Massachusetts'],
                   [42.4184296, -71.1061638, 4, 'Medford Massachusetts'],
                   [42.3248426, -71.0950157, 4, 'Roxbury Massachusetts'],
                   [42.466763, -70.9494938, 4, 'Lynn Massachusetts'],
                   [42.3750976, -70.9828269, 3, 'winthrop Massachusetts'],
                   [42.3917638, -71.0328283, 3, 'Chelsea Massachusetts'],
                   [42.2528772, -71.0022704, 3, 'Quincy Massachusetts'],
                   [42.3709299, -71.182832, 3, 'Watertown Massachusetts'],
                   [42.40843, -71.0536624, 3, 'Everett Massachusetts'],
                   [42.3317642, -71.1211634, 3, 'Brookline Massachusetts'],
                   [42.4153739, -71.1564427, 3, 'Arlington Massachusetts'],
                   [42.2212188, -70.9391624, 2, 'Weymouth Massachusetts'],
                   [42.2912093, -71.1244965, 2, 'Roslindale Massachusetts'],
                   [42.6334247, -71.3161717, 2, 'Lowell Massachusetts'],
                   [42.3459271, -71.5522873, 2, 'Marlborough Massachusetts'],
                   [42.4792618, -71.1522765, 1, 'Woburn Massachusetts'],
                   [41.6484421, -70.4811382, 1, 'Mashpee Massachusetts'],
                   [42.4800954, -71.0994975, 1, 'Stoneham Massachusetts'],
                   [42.2223218, -70.9994919, 1, 'Braintree Massachusetts'],
                   [42.3598196, -71.0661622, 1, 'Beacon Hill Massachusetts'],
                   [42.355838, -71.0556164, 1, 'Financial District Massachusetts'],
                   [42.4473175, -71.2245002, 1, 'Lexington Massachusetts'],
                   [42.5584264, -71.2689469, 1, 'Billerica Massachusetts'],
                   [42.3370414, -71.2092213, 1, 'Newton Massachusetts'],
                   [42.2403766, -71.1369963, 1, 'Readville Massachusetts'],
                   [41.3924769, -70.6202643063347, 1, "Martha's Vineyard Massachusetts"],
                   [42.3650974, -71.0544953, 1, 'North End Massachusetts'],
                   [42.4850931, -71.4328399, 1, 'Acton Massachusetts'],
                   [42.5195292, -70.8967225, 1, 'Salem Massachusetts'],
                   [42.5584284, -70.880049, 1, 'Beverly Massachusetts'],
                   [42.6987024, -71.1350574, 1, 'North Andover Massachusetts'],
                   [42.4250964, -71.0661629, 1, 'Malden Massachusetts'],
                   [42.7070354, -71.1631136, 1, 'Lawrence Massachusetts'],
                   [42.2792625, -71.4161719, 1, 'Framingham Massachusetts'],
                   [41.9376051, -70.0327995, 1, 'Wellfleet Massachusetts'],
                   [42.5278731, -70.9286608, 1, 'Peabody Massachusetts'],
                   [42.366828, -71.02733, 1, 'Boston Logan Airport'],
                   [42.2417669, -70.8897675, 1, 'Hingham Massachusetts'],
                   [42.332926, -71.1032142308063, 1, 'Mission Hill Massachusetts'],
                   [42.2694308, -71.6129906, 1, 'Westborough Massachusetts'],
                   [42.330653, -71.1622756, 1, 'Chestnut Hill Massachusetts'],
                   [42.2417653, -71.1661639, 1, 'Dedham Massachusetts'],
                   [42.7777829, -71.0767723, 1, 'Haverhill Massachusetts'],
                   [42.6106479, -71.2342247, 1, 'Tewksbury Massachusetts']];

      function initMap() {
        // Create a new StyledMapType object, passing it an array of styles,
        // and the name to be displayed on the map type control.
        var styledMapType = new google.maps.StyledMapType(
          [
            {
              stylers: [
                { hue: '#00ffe6' },
                { saturation: -20 }
              ]
            },{
              featureType: 'road',
              elementType: 'geometry',
              stylers: [
                { lightness: 100 },
                { visibility: 'simplified' }
              ]
            },{
              featureType: 'road',
              elementType: 'labels',
              stylers: [
                { visibility: 'off' }
              ]
            }
          ],
          {name: 'Styled Map'});

        // Create a map object, and include the MapTypeId to add
        // to the map type control.
        var map = new google.maps.Map(document.getElementById('map'), {
          center: {lat:42.3554711, lng: -71.155372},
          zoom: 11,
          mapTypeControlOptions: {
            mapTypeIds: ['roadmap', 'satellite', 'hybrid', 'terrain',
                    'styled_map']
          }
        });

        //Associate the styled map with the MapTypeId and set it to display.
        map.mapTypes.set('styled_map', styledMapType);
        map.setMapTypeId('styled_map');

        for (i=0; i<info_list.length; i++) {
          addMarker(map, parseFloat(info_list[i][0]), parseFloat(info_list[i][1]), 
                         parseFloat(info_list[i][2]), info_list[i][3]);
        }

      }

      function customizeMarker(size) {
        var image = {
            path: google.maps.SymbolPath.CIRCLE,
            scale: size,
            fillColor: 'red',            
            strokeColor: 'red',
            fillOpacity: 1,
            strokeOpacity: 1,
            strokeScale: .1,
        };
        return image;
      }

      function addMarker(map, lt, ln, size, info) {
        var marker = new google.maps.Marker({
          position: {lat: lt, lng: ln},
          icon: customizeMarker(size),
          map: map
        });
        var infowindow = new google.maps.InfoWindow({
          content: '<div id="content">'+'<h3 id="firstHeading" class="firstHeading">' + 
                info + '</h3>'+'<div id="bodyContent">'+ size +' PrEP users</div>'+'</div>'
        });
        marker.addListener('mouseover', function() {
          infowindow.open(map, marker);
        });
        marker.addListener('mouseout', function() {
          infowindow.close();
        });
      }

    </script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDk5fD0WF4USa_ABfJSzwj5Ix-HvdVUXbY&callback=initMap">
    </script>
  </body>
</html>
