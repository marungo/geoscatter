<!DOCTYPE html>
<html>
  <head>
    <title>Styled Map Types</title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <style>
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
      #map {
        height: 100%;
      }
    </style>
  </head>
  <body>
    <div id="map"></div>
    <script>

      info_list = [[42.2973205, -71.0744951, 1061], [42.3750997, -71.1056156, 1023],
                  [42.0959276, -72.5828662, 933],[42.3507067, -71.0797296, 675],[42.3547903, -71.1181804, 497],
                 [42.058436, -70.1786374, 494],[42.3098201, -71.1203298, 457],[42.3875968, -71.0994967, 441],
                 [42.3334312, -71.0494948, 389],[42.3750973, -71.0392172, 382],
                 [42.6334247, -71.3161717, 354],[42.34406895, -71.0945223672873, 324],
                 [42.2528772, -71.0022704, 300],[42.3604823, -71.0595677, 280],
                 [42.466763, -70.9494938, 232],[42.3317642, -71.1211634, 218],
                 [42.4250964, -71.0661629, 202],[42.4084302, -71.0119947, 202],
                 [42.4184296, -71.1061638, 200],[42.3248426, -71.0950157, 188],
                 [42.2792625, -71.4161719, 175],[42.7777829, -71.0767723, 171],
                 [42.5195292, -70.8967225, 160],[42.7070354, -71.1631136, 155],
                 [42.3756401, -71.2358003, 148],[42.3551473, -71.0599538, 140],
                 [41.7001132, -70.2994665, 135],[42.40843, -71.0536624, 131],
                 [42.3598196, -71.0661622, 129],[42.3917638, -71.0328283, 123],
                 [42.7262016, -71.1908923, 117],[42.3370414, -71.2092213, 115],
                 [42.2223218, -70.9994919, 103],[42.2912093, -71.1244965, 94],
                 [42.3459271, -71.5522873, 91],[42.2212188, -70.9391624, 91],
                 [42.4792618, -71.1522765, 90],[42.3709299, -71.182832, 87],
                 [42.5278731, -70.9286608, 85],[42.5584284, -70.880049, 79],
                 [42.2556543, -71.1244962, 77],[42.4153739, -71.1564427, 77],
                 [42.332926, -71.1032142308063, 72],[42.366828, -71.02733, 72],
                 [42.355838, -71.0556164, 64],[42.1398188, -71.5161739, 64],
                 [42.3650974, -71.0544953, 63],[42.4564323, -71.0641819, 58],
                 [40.75891, -73.2507699, 56],[42.2836393, -71.3469959, 55],
                 [42.65717, -71.1408775, 52],[41.7056656, -70.2286313, 52],
                 [42.2723208, -71.0869952, 48],[42.6987024, -71.1350574, 46],
                 [42.2792649, -71.1494971, 46],[42.8125913, -70.877275, 46],
                 [42.4648183, -71.0100509, 44],[42.2417653, -71.1661639, 44],
                 [42.6159286, -70.6619887, 43],[42.506484, -71.0728305, 42],
                 [42.3778749, -71.0619956, 41],[42.5584264, -71.2689469, 40],
                 [41.5514979, -70.6147518, 36],[42.3507175, -71.0646946, 34],
                 [41.3924769, -70.6202643063347, 33],[41.6484421, -70.4811382, 33],
                 [42.6106479, -71.2342247, 31],[42.6703687, -71.3020051, 30],
                 [42.0834313, -71.3967249, 30],[42.3595184, -71.059284, 29],
                 [42.3750976, -70.9828269, 28],[42.4800954, -71.0994975, 27],
                 [41.7353872, -70.1939086, 26],[42.4473175, -71.2245002, 26],
                 [42.330653, -71.1622756, 26],[42.5998139, -71.3672837, 25],
                 [42.341669, -71.1099349, 24],[42.3913088, -71.5678235, 24],
                 [42.352444, -71.0625269, 24],[41.7412166, -70.5989195, 23],
                 [42.5464828, -71.1736668, 23],[42.4850931, -71.4328399, 23],
                 [42.3639186, -71.0638992, 21],[42.3959296, -71.1786654, 21],
                 [42.2694308, -71.6129906, 21],[42.0869493, -71.4746435, 19],
                 [41.6862224, -70.0758507, 19],[42.4699241, -70.9171506, 19],
                 [42.8579536, -70.930092, 18],[42.500096, -70.8578252, 18],
                 [42.2967648, -71.1119962, 17],[41.7898313, -69.9897396, 17],
                 [42.3459259, -71.7550706, 17],[42.2417669, -70.8897675, 16],
                 [41.7579043, -70.4968151, 16],[42.2288427, -71.5195533, 15],
                 [41.8301081, -69.9739069, 15],[42.0653768, -71.2478307, 15],
                 [41.492235, -81.9301211754671, 14],[42.4605189, -71.3488962, 14],
                 [42.3020436, -70.9078242, 13],[42.4523178, -71.1369981, 13],
                 [42.29709, -71.7139337, 13],[41.7601093, -70.0827959, 13],
                 [42.350807, -71.057969, 13],[42.107677, -72.5575179, 11],
                 [42.8417577, -70.8606082, 11],[42.4321064, -71.4539682, 11],
                 [42.1417641, -71.3967255, 11],[41.993437, -70.0497456, 11],
                 [42.3632063, -71.360672, 9],[41.9376051, -70.0327995, 9],
                 [41.6820563, -69.9597375, 9],[42.2612067, -71.4633955, 9],
                 [42.3056501, -71.5245086, 8],[42.319538, -71.6411785, 8],
                 [42.2000966, -71.4245048, 8],[42.3834278, -71.4161724, 8],
                 [42.7961518, -70.8610434, 7],[42.7250918, -70.9911658, 7],
                 [38.8703449, -76.9424703, 7],[42.7603688, -71.031445, 6],
                 [42.1865609, -71.3054599, 6],[42.1675975, -71.3578356, 4],
                 [42.1538607, -71.1828014, 4],[42.6592685, -71.4185526187402, 4],
                 [42.0667652, -71.3281113, 3],[42.4365949, -71.5050008, 3],
                 [42.2403766, -71.1369963, 3],[42.4334258, -71.6078448, 2],
                 [42.381204, -71.637012, 2],[42.5375917, -71.5120095, 2],
                 [42.4934474, -71.5141043, 1]];
      function initMap() {
        // Create a new StyledMapType object, passing it an array of styles,
        // and the name to be displayed on the map type control.
        var styledMapType = new google.maps.StyledMapType(
          [
            {
              stylers: [
                { hue: '#00ffe6' },
                { saturation: -20 }
              ]
            },{
              featureType: 'road',
              elementType: 'geometry',
              stylers: [
                { lightness: 100 },
                { visibility: 'simplified' }
              ]
            },{
              featureType: 'road',
              elementType: 'labels',
              stylers: [
                { visibility: 'off' }
              ]
            }
          ],
          {name: 'Styled Map'});

        // Create a map object, and include the MapTypeId to add
        // to the map type control.
        var map = new google.maps.Map(document.getElementById('map'), {
          center: {lat:42.1884282, lng: -71.7174393},
          zoom: 9,
          mapTypeControlOptions: {
            mapTypeIds: ['roadmap', 'satellite', 'hybrid', 'terrain',
                    'styled_map']
          }
        });

        //Associate the styled map with the MapTypeId and set it to display.
        map.mapTypes.set('styled_map', styledMapType);
        map.setMapTypeId('styled_map');

        for (i=0; i<info_list.length; i++) {
          addMarker(map, info_list[2], info_list[0], info_list[1]);
        }

      }

      function customizeMarker(size) {
        console.log("logging customizeMarker call");
        var image = {
            path: google.maps.SymbolPath.CIRCLE,
            scale: size,
            fillColor: 'red',            
            strokeColor: 'red',
            fillOpacity: 1.0,
            strokeOpacity: 1.0,
            strokeScale: .1,
        };
        return image;
      }

      function addMarker(map, size, lt, ln) {
        console.log("logging addMarker() call");
        var marker = new google.maps.Marker({
          position: {lat: lt, lng: ln},
          icon: customizeMarker(size),
          title: "what is a title",
          map: map
        });
        var infowindow = new google.maps.InfoWindow({
          content: "there we are"
        });
        marker.addListener('mouseover', function() {
          infowindow.open(map, marker);
        });
        marker.addListener('mouseout', function() {
          infowindow.close();
        });

      }

    </script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDk5fD0WF4USa_ABfJSzwj5Ix-HvdVUXbY&callback=initMap">
    </script>
  </body>
</html>
